"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[230],{230:(G,h,i)=>{i.r(h),i.d(h,{UnoPageModule:()=>j});var a=i(6019),y=i(9133),s=i(4662),l=i(1880),T=i(4099),u=i(8260),x=i(5305),d=i(8761),p=i(3051),U=i(7539),m=i(9204),A=i(8717),n=i(3668),f=i(607),Z=i(6382),R=i(5722),$=i(2445);function C(t,r){1&t&&n._UZ(0,"app-choose-players")}function P(t,r){if(1&t){const o=n.EpF();n.TgZ(0,"ion-card"),n._uU(1),n.ALo(2,"json"),n.TgZ(3,"ion-button",3),n.NdJ("click",function(){return n.CHM(o),n.oxw(2).openNextRound()}),n._UZ(4,"ion-icon",4),n.qZA(),n.qZA()}if(2&t){const o=r.$implicit;n.xp6(1),n.hij(" ",n.lcZ(2,1,o)," ")}}function _(t,r){if(1&t&&n.YNc(0,P,5,3,"ion-card",2),2&t){const o=n.oxw();n.Q6J("ngForOf",o.players)}}let b=(()=>{class t{constructor(o,e){this.store=o,this.sharedService=e,this.templateRound=u.N.games.uno.rounds[1],this.roundsCfg=u.N.games.train.rounds,this.inverse={}}ngOnInit(){this.activeRound$.pipe((0,R.b)(o=>this.activeRound=o),(0,m.w)(o=>this.store.select(d.N_(o._id)))).subscribe(o=>{o&&(this.round=o)}),this.rounds$=this.store.select(d.PK),this.rounds$.subscribe(o=>{this.rounds=o}),this.players$=this.store.select(p.y1),this.players$.subscribe(o=>{this.players=o,this.players.forEach(e=>this.inverse[e._id]=1)})}openNextRound(){this.sharedService.addRounds(this.templateRound)}}return t.\u0275fac=function(o){return new(o||t)(n.Y36(f.yh),n.Y36(Z.F))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-uno-rounds"]],inputs:{activeRound$:"activeRound$"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["restRounds",""],[4,"ngFor","ngForOf"],["shape","round","color","success","fill","outline",3,"click"],["name","add-outline"]],template:function(o,e){if(1&o&&(n.YNc(0,C,1,0,"app-choose-players",0),n.ALo(1,"async"),n.YNc(2,_,1,1,"ng-template",null,1,n.W1O)),2&o){const c=n.MAs(3);n.Q6J("ngIf","start"===(null==e.activeRound?null:e.activeRound._id)&&0===n.lcZ(1,2,e.rounds$).length)("ngIfElse",c)}},directives:[a.O5,$.U,a.sg,s.PM,s.YG,s.gu],pipes:[a.Ov,a.Ts],styles:[""]}),t})();var v=i(3085);function F(t,r){if(1&t&&(n.TgZ(0,"ion-segment-button",8),n.ALo(1,"async"),n.ALo(2,"async"),n._UZ(3,"ion-icon",9),n.qZA()),2&t){const o=r.$implicit,e=n.oxw();n.Q6J("value",o)("disabled","start"===o._id&&n.lcZ(1,3,e.rounds$).length||"start"!==o._id&&0===n.lcZ(2,5,e.rounds$).length),n.xp6(3),n.Q6J("name",o.icon)}}const J=function(t){return{"border-left":t,"padding-left":"10px"}},M=function(t){return{"border-right":t,"padding-right":"10px"}};function N(t,r){if(1&t&&(n.TgZ(0,"ion-item"),n.TgZ(1,"ion-label",14),n._uU(2),n.qZA(),n.TgZ(3,"div",15),n._uU(4),n.qZA(),n.qZA()),2&t){const o=r.$implicit,e=n.oxw(2);n.xp6(1),n.Q6J("ngStyle",n.VKq(4,J,"6px solid "+o.color)),n.xp6(1),n.hij(" ",o.name," "),n.xp6(1),n.Q6J("ngStyle",n.VKq(6,M,"6px solid "+o.color)),n.xp6(1),n.hij(" ",e.getPlayerTotalScores(o._id)," ")}}function S(t,r){if(1&t){const o=n.EpF();n.TgZ(0,"ion-card"),n.TgZ(1,"ion-card-header"),n.TgZ(2,"ion-card-title",10),n._uU(3,"Uno"),n.qZA(),n.qZA(),n.TgZ(4,"ion-card-content"),n.TgZ(5,"ion-list"),n.YNc(6,N,5,8,"ion-item",11),n.qZA(),n.TgZ(7,"ion-row",12),n.TgZ(8,"ion-button",13),n.NdJ("click",function(){return n.CHM(o),n.oxw().onFinishGameHandler()}),n.ALo(9,"async"),n.ALo(10,"async"),n._uU(11),n.ALo(12,"translate"),n.qZA(),n.TgZ(13,"ion-button",13),n.NdJ("click",function(){return n.CHM(o),n.oxw().onCancelGameHandler()}),n.ALo(14,"async"),n.ALo(15,"async"),n._uU(16),n.ALo(17,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&t){const o=n.oxw();n.xp6(6),n.Q6J("ngForOf",o.playersWithTotal),n.xp6(2),n.Q6J("disabled",0===n.lcZ(9,5,o.rounds$).length||n.lcZ(10,7,o.loading$)),n.xp6(3),n.hij(" ",n.lcZ(12,9,"elements.button.finishGame")," "),n.xp6(2),n.Q6J("disabled",0===n.lcZ(14,11,o.rounds$).length||n.lcZ(15,13,o.loading$)),n.xp6(3),n.hij(" ",n.lcZ(17,15,"elements.button.cancelGame")," ")}}const O=[{path:"",component:(()=>{class t{constructor(o,e,c,g){this.store=o,this.sharedService=e,this.route=c,this.router=g,this.roundsCfg=u.N.games.uno.rounds,this.activeRound$=new T.X(this.roundsCfg[0])}ngOnInit(){console.log("uno onInit"),this.loading$=this.store.select(x.NH),this.roundMembers$=this.store.select(U.uW),this.activeRound$.subscribe(o=>this.activeRound=o),this.rounds$=this.store.select(d.PK),this.rounds$.subscribe(o=>{this.rounds=o,o.length?"start"===this.activeRound._id&&this.activeRound$.next(this.roundsCfg[1]):"start"!==this.activeRound._id&&this.activeRound$.next(this.roundsCfg[0])}),this.players$=this.store.select(p.y1),this.players$.pipe((0,m.w)(o=>(this.players=o,this.roundMembers$))).subscribe(o=>{this.roundMembers=o,this.playersWithTotal=this.players.map(e=>Object.assign(Object.assign({},e),{totalScore:this.getPlayerTotalScores(e._id)})).sort((e,c)=>c.totalScore-e.totalScore)})}getPlayerTotalScores(o){return this.sharedService.getPlayerTotalScores(o,this.roundMembers)}onMenuClickHandler(o){this.activeRound$.next(o.target.value)}onFinishGameHandler(){}onCancelGameHandler(){this.store.dispatch(A.GJ())}}return t.\u0275fac=function(o){return new(o||t)(n.Y36(f.yh),n.Y36(Z.F),n.Y36(l.gz),n.Y36(l.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-uno"]],decls:15,vars:6,consts:[["slot","end"],["menu","games-menu"],["scrollable","",3,"value","ionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"ion-no-margin","ion-no-padding"],["size-lg","6","size-md","8","size-sm","10","offset-lg","3","offset-md","2","offset-sm","1"],[4,"ngIf"],[3,"activeRound$"],[3,"value","disabled"],[3,"name"],[1,"ion-text-center"],[4,"ngFor","ngForOf"],[1,"ion-justify-content-around"],["fill","outline","size","small",3,"disabled","click"],[3,"ngStyle"],["slot","end",3,"ngStyle"]],template:function(o,e){1&o&&(n.TgZ(0,"ion-header"),n.TgZ(1,"ion-toolbar"),n.TgZ(2,"ion-buttons",0),n._UZ(3,"ion-menu-button",1),n.qZA(),n.TgZ(4,"ion-segment",2),n.NdJ("ionChange",function(g){return e.onMenuClickHandler(g)}),n.YNc(5,F,4,7,"ion-segment-button",3),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"ion-content"),n.TgZ(7,"ion-grid",4),n.TgZ(8,"ion-row"),n.TgZ(9,"ion-col",5),n.YNc(10,S,18,17,"ion-card",6),n.ALo(11,"async"),n.qZA(),n.qZA(),n.TgZ(12,"ion-row"),n.TgZ(13,"ion-col",5),n._UZ(14,"app-uno-rounds",7),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&o&&(n.xp6(4),n.Q6J("value",e.activeRound),n.xp6(1),n.Q6J("ngForOf",e.roundsCfg),n.xp6(5),n.Q6J("ngIf",0!==n.lcZ(11,4,e.rounds$).length),n.xp6(4),n.Q6J("activeRound$",e.activeRound$))},directives:[s.Gu,s.sr,s.Sm,s.fG,s.cJ,s.QI,a.sg,s.W2,s.jY,s.Nd,s.wI,a.O5,b,s.GO,s.gu,s.PM,s.Zi,s.Dq,s.FN,s.q_,s.YG,s.Ie,s.Q$,a.PC],pipes:[a.Ov,v.X$],styles:[""]}),t})()}];let Q=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[l.Bz.forChild(O)],l.Bz]}),t})();var Y=i(6932);let j=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[a.ez,y.u5,s.Pc,Q,v.aw.forChild({extend:!0}),Y.j]]}),t})()}}]);