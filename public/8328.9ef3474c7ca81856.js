"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8328],{2445:(y,Z,i)=>{i.d(Z,{U:()=>M});var m=i(4762),e=i(3668),n=i(4662),p=i(6019);const g=function(s){return{"background-color":s}};function f(s,a){if(1&s){const o=e.EpF();e.TgZ(0,"ion-col",2),e.NdJ("click",function(){const l=e.CHM(o).$implicit;return e.oxw().onSelect(l)}),e._UZ(1,"div",3),e.qZA()}if(2&s){const o=a.$implicit;e.xp6(1),e.Q6J("ngStyle",e.VKq(1,g,o))}}let d=(()=>{class s{constructor(o){this.popoverController=o}ngOnInit(){}dismiss(o){this.popoverController.dismiss(o)}onSelect(o){this.dismiss({color:o})}}return s.\u0275fac=function(o){return new(o||s)(e.Y36(n.Dh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-select-color"]],inputs:{colors:"colors"},decls:5,vars:1,consts:[[1,"select-color"],["class","select-color__container",3,"click",4,"ngFor","ngForOf"],[1,"select-color__container",3,"click"],[1,"select-color__item",3,"ngStyle"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-card"),e.TgZ(1,"ion-card-content"),e.TgZ(2,"ion-grid"),e.TgZ(3,"ion-row",0),e.YNc(4,f,2,3,"ion-col",1),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(4),e.Q6J("ngForOf",t.colors))},directives:[n.PM,n.FN,n.jY,n.Nd,p.sg,n.wI,p.PC],styles:[""]}),s})();var _=i(8260),C=i(9133),v=i(3085);const T=function(s){return{"background-color":s}};let A=(()=>{class s{constructor(o){this.popoverController=o,this.playersColors=_.N.games.train.playersColors,this.color=this.playersColors[0]}ngOnInit(){}presentPopover(o,t,r){return(0,m.mG)(this,void 0,void 0,function*(){const l=yield this.popoverController.create({component:t,cssClass:"select-color-popover",componentProps:r,translucent:!0});return yield l.present(),yield l.onDidDismiss()})}showSelectColorPopup(o){return(0,m.mG)(this,void 0,void 0,function*(){const{data:t}=yield this.presentPopover(o,d,{colors:this.playersColors});if(t){const{color:r}=t;this.color=r}})}dismiss(o){this.popoverController.dismiss(o)}onCreate(){this.dismiss({gamer:{color:this.color,name:this.name}})}}return s.\u0275fac=function(o){return new(o||s)(e.Y36(n.Dh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-create-gamer"]],decls:26,vars:17,consts:[["slot","end"],[3,"click"],["lines","none"],[1,"players-list"],[1,"players-list__color"],[1,"select-color",3,"ngStyle","click"],[1,"players-list__name"],["clearInput","",3,"placeholder","ngModel","ngModelChange"],["expand","block",3,"disabled","click"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar"),e.TgZ(2,"ion-title"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"ion-buttons",0),e.TgZ(6,"ion-button",1),e.NdJ("click",function(){return t.dismiss()}),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"ion-content"),e.TgZ(10,"ion-card"),e.TgZ(11,"ion-card-content"),e.TgZ(12,"ion-list"),e.TgZ(13,"ion-item",2),e.TgZ(14,"div",3),e.TgZ(15,"div",4),e.TgZ(16,"div",5),e.NdJ("click",function(l){return t.showSelectColorPopup(l)}),e.qZA(),e.qZA(),e.TgZ(17,"div",6),e.TgZ(18,"ion-item"),e.TgZ(19,"ion-input",7),e.NdJ("ngModelChange",function(l){return t.name=l}),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"ion-row"),e.TgZ(22,"ion-col"),e.TgZ(23,"ion-button",8),e.NdJ("click",function(){return t.onCreate()}),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,7,"modules.games.createGamer")),e.xp6(4),e.hij(" ",e.lcZ(8,9,"elements.button.close")," "),e.xp6(9),e.Q6J("ngStyle",e.VKq(15,T,t.color)),e.xp6(3),e.Q6J("placeholder",e.lcZ(20,11,"modules.user.name"))("ngModel",t.name),e.xp6(4),e.Q6J("disabled",!t.name),e.xp6(1),e.hij(" ",e.lcZ(25,13,"elements.button.create")," "))},directives:[n.Gu,n.sr,n.wd,n.Sm,n.YG,n.W2,n.PM,n.FN,n.q_,n.Ie,p.PC,n.pK,n.j9,C.JJ,C.On,n.Nd,n.wI],pipes:[v.X$],styles:[""]}),s})();var P=i(3051),q=i(5305),h=i(5803),b=i(607),x=i(9973),G=i(6382);function O(s,a){if(1&s&&(e.TgZ(0,"ion-select-option",15),e._uU(1),e.qZA()),2&s){const o=a.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o.name," ")}}const k=function(s){return{"background-color":s}};function J(s,a){if(1&s){const o=e.EpF();e.TgZ(0,"ion-item-sliding",9),e.TgZ(1,"ion-item",9),e.TgZ(2,"div",10),e.TgZ(3,"div",11),e.TgZ(4,"div",12),e.NdJ("click",function(r){const c=e.CHM(o).index,u=e.oxw();return u.filtredColors.length>1?u.showSelectColorPopup(r,c):null}),e.qZA(),e.qZA(),e.TgZ(5,"div",13),e.TgZ(6,"ion-item"),e.TgZ(7,"ion-select",14),e.NdJ("ionChange",function(r){const c=e.CHM(o).index;return e.oxw().choosePlayerHandler(r,c)}),e.TgZ(8,"ion-select-option",15),e._uU(9),e.qZA(),e.YNc(10,O,2,2,"ion-select-option",16),e.qZA(),e.TgZ(11,"ion-note",17),e._UZ(12,"ion-icon",18),e._UZ(13,"ion-icon",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"ion-item-options",20),e.TgZ(15,"ion-item-option",21),e.NdJ("click",function(){const l=e.CHM(o).$implicit;return e.oxw().removePlayerHandler(l._id)}),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&s){const o=a.$implicit,t=e.oxw();e.xp6(4),e.Q6J("ngStyle",e.VKq(8,k,null==o?null:o.color)),e.xp6(3),e.Q6J("value",o),e.xp6(1),e.Q6J("value",o),e.xp6(1),e.hij(" ",o.name," "),e.xp6(1),e.Q6J("ngForOf",t.filtredGamers),e.xp6(6),e.Oqu(e.lcZ(17,6,"elements.button.remove"))}}let M=(()=>{class s{constructor(o,t,r,l,c,u){this.store=o,this.translate=t,this.gamerService=r,this.popoverController=l,this.alertController=c,this.sharedService=u,this.environment=_.N,this.gamers=[],this.filtredGamers=[],this.players=[]}ngOnInit(){this.gameType$=this.store.select(q.Wn),this.gameType$.subscribe(o=>{var t,r;this.gameType=o,this.playersColors=null===(t=_.N.games[o])||void 0===t?void 0:t.playersColors,this.filtredColors=null===(r=_.N.games[o])||void 0===r?void 0:r.playersColors}),this.players$=this.store.select(P.y1),this.players$.subscribe(o=>{this.players=o,this.filter()}),this.gamers$=this.gamerService.entities$,this.gamers$.subscribe(o=>{this.gamers=o,this.filter()})}startGameHandler(){this.sharedService.createRounds(this.gameType)}presentPopover(o,t,r){return(0,m.mG)(this,void 0,void 0,function*(){const l=yield this.popoverController.create({component:t,cssClass:"select-color-popover",componentProps:r,translucent:!0});return yield l.present(),yield l.onDidDismiss()})}showSelectColorPopup(o,t){return(0,m.mG)(this,void 0,void 0,function*(){const{data:r}=yield this.presentPopover(o,d,{colors:this.filtredColors});if(r){const{color:l}=r;this.chooseColorHandler(l,t)}})}showCreateGamerPopup(o){return(0,m.mG)(this,void 0,void 0,function*(){const{data:t}=yield this.presentPopover(o,A,null);if(t){const{gamer:r}=t;console.log("gamer",t),this.createGamerHandler(r)}})}filter(){var o;this.filtredGamers=this.gamers.filter(r=>{for(const l of this.players)if(l._id===r._id)return!1;return!0});const t=null===(o=this.playersColors)||void 0===o?void 0:o.filter((r,l)=>{for(const c of this.players)if(c.color===r)return!1;return!0});this.filtredColors=(null==t?void 0:t.length)?t:this.filtredColors}choosePlayerHandler(o,t){const r=this.players.map((l,c)=>c===t?this.filtredColors.includes(this.filtredGamers[0].color)?o.target.value:Object.assign(Object.assign({},o.target.value),{color:this.filtredColors[0]}):l);this.store.dispatch(h.K9({players:r}))}chooseColorHandler(o,t){this.players=this.players.map((r,l)=>l===t?Object.assign(Object.assign({},r),{color:o}):r),this.filter()}removePlayerHandler(o){this.store.dispatch(h.WQ({id:o}))}removeAllPlayersHandler(){this.store.dispatch(h.dO())}addPlayerHandler(o=!0){if(!this.filtredGamers.length)return;let t=this.filtredGamers[0];o||(t=this.filtredGamers[this.filtredGamers.length-1]),this.filtredColors.includes(t.color)?this.store.dispatch(h.KM({player:Object.assign({},t)})):this.store.dispatch(h.KM({player:Object.assign(Object.assign({},t),{color:this.filtredColors[0]})}))}createGamerHandler(o){this.gamerService.add(o).subscribe(t=>{console.log(t)})}}return s.\u0275fac=function(o){return new(o||s)(e.Y36(b.yh),e.Y36(v.sK),e.Y36(x.E),e.Y36(n.Dh),e.Y36(n.Br),e.Y36(G.F))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-choose-players"]],decls:29,vars:22,consts:[[1,"ion-text-center"],[1,"choose-players"],[1,"choose-players__list"],["lines","none",4,"ngFor","ngForOf"],[1,"choose-players__btn-block"],["expand","block","fill","outline","size","small","color","secondary",3,"disabled","click"],["expand","block","fill","outline","size","small","color","success",3,"disabled","click"],["expand","block","fill","outline","size","small","color","danger",3,"click"],["expand","block",3,"disabled","click"],["lines","none"],[1,"players-list"],[1,"players-list__color"],[1,"select-color",3,"ngStyle","click"],[1,"players-list__name"],["placeholder","Select One","interface","popover","slot","end",3,"value","ionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["slot","end","color","danger"],["name","trash-outline"],["name","caret-back-outline"],["side","end"],["color","danger",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-card"),e.TgZ(1,"ion-card-header"),e.TgZ(2,"ion-card-title",0),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"ion-card-subtitle",0),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"ion-card-content",1),e.TgZ(8,"ion-list",2),e.YNc(9,J,18,10,"ion-item-sliding",3),e.ALo(10,"async"),e.qZA(),e.TgZ(11,"ion-row",4),e.TgZ(12,"ion-col"),e.TgZ(13,"ion-button",5),e.NdJ("click",function(){return t.addPlayerHandler()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"ion-col"),e.TgZ(17,"ion-button",6),e.NdJ("click",function(l){return t.showCreateGamerPopup(l)}),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.qZA(),e.TgZ(20,"ion-col"),e.TgZ(21,"ion-button",7),e.NdJ("click",function(){return t.removeAllPlayersHandler()}),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"ion-row",4),e.TgZ(25,"ion-col"),e.TgZ(26,"ion-button",8),e.NdJ("click",function(){return t.startGameHandler()}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,10,"modules.games.addPlayers")),e.xp6(3),e.Oqu(null==t.environment.games[t.gameType]?null:t.environment.games[t.gameType].name),e.xp6(3),e.Q6J("ngForOf",e.lcZ(10,12,t.players$)),e.xp6(4),e.Q6J("disabled",t.players.length>=5),e.xp6(1),e.hij(" ",e.lcZ(15,14,"elements.button.add")," "),e.xp6(3),e.Q6J("disabled",t.players.length>=5),e.xp6(1),e.hij(" ",e.lcZ(19,16,"elements.button.create")," "),e.xp6(4),e.hij(" ",e.lcZ(23,18,"elements.button.removeAll")," "),e.xp6(4),e.Q6J("disabled",t.players.length<2),e.xp6(1),e.hij(" ",e.lcZ(28,20,"elements.button.startGame")," "))},directives:[n.PM,n.Zi,n.Dq,n.tO,n.FN,n.q_,p.sg,n.Nd,n.wI,n.YG,n.td,n.Ie,p.PC,n.t9,n.QI,n.n0,n.uN,n.gu,n.IK,n.u8],pipes:[v.X$,p.Ov],styles:[""]}),s})()},6932:(y,Z,i)=>{i.d(Z,{j:()=>f});var m=i(6019),e=i(3085),n=i(4662),p=i(9133),g=i(3668);let f=(()=>{class d{}return d.\u0275fac=function(C){return new(C||d)},d.\u0275mod=g.oAB({type:d}),d.\u0275inj=g.cJS({imports:[[p.u5,m.ez,n.Pc,e.aw.forChild({extend:!0})]]}),d})()}}]);