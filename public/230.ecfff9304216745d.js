"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[230],{230:(I,h,i)=>{i.r(h),i.d(h,{UnoPageModule:()=>G});var r=i(6019),y=i(9133),s=i(4662),l=i(1880),T=i(4099),d=i(8260),x=i(5305),u=i(8761),p=i(3051),U=i(7539),m=i(9204),A=i(8717),n=i(3668),f=i(607),Z=i(6382),$=i(5722),R=i(2445);function P(o,a){1&o&&n._UZ(0,"app-choose-players")}function C(o,a){1&o&&n._UZ(0,"ion-card")}function b(o,a){if(1&o&&n.YNc(0,C,1,0,"ion-card",2),2&o){const t=n.oxw();n.Q6J("ngForOf",t.players)}}let J=(()=>{class o{constructor(t,e){this.store=t,this.sharedService=e,this.templateRound=d.N.games.uno.rounds[1],this.roundsCfg=d.N.games.train.rounds,this.inverse={}}ngOnInit(){this.activeRound$.pipe((0,$.b)(t=>this.activeRound=t),(0,m.w)(t=>this.store.select(u.cJ(t._id)))).subscribe(t=>{t&&(this.round=t)}),this.rounds$=this.store.select(u.PK),this.rounds$.subscribe(t=>{this.rounds=t}),this.players$=this.store.select(p.y1),this.players$.subscribe(t=>{this.players=t,this.players.forEach(e=>this.inverse[e._id]=1)})}openNextRound(){this.sharedService.addRounds(this.templateRound)}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(f.yh),n.Y36(Z.F))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-uno-rounds"]],inputs:{activeRound$:"activeRound$"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["restRounds",""],[4,"ngFor","ngForOf"]],template:function(t,e){if(1&t&&(n.YNc(0,P,1,0,"app-choose-players",0),n.ALo(1,"async"),n.YNc(2,b,1,1,"ng-template",null,1,n.W1O)),2&t){const c=n.MAs(3);n.Q6J("ngIf","start"===(null==e.activeRound?null:e.activeRound._id)&&0===n.lcZ(1,2,e.rounds$).length)("ngIfElse",c)}},directives:[r.O5,R.U,r.sg,s.PM],pipes:[r.Ov],styles:[""]}),o})();var v=i(3085);function F(o,a){if(1&o&&(n.TgZ(0,"ion-segment-button",8),n.ALo(1,"async"),n.ALo(2,"async"),n._UZ(3,"ion-icon",9),n.qZA()),2&o){const t=a.$implicit,e=n.oxw();n.Q6J("value",t)("disabled","start"===t._id&&n.lcZ(1,3,e.rounds$).length||"start"!==t._id&&0===n.lcZ(2,5,e.rounds$).length),n.xp6(3),n.Q6J("name",t.icon)}}const S=function(o){return{"border-left":o,"padding-left":"10px"}},M=function(o){return{"border-right":o,"padding-right":"10px"}};function N(o,a){if(1&o&&(n.TgZ(0,"ion-item"),n.TgZ(1,"ion-label",14),n._uU(2),n.qZA(),n.TgZ(3,"div",15),n._uU(4),n.qZA(),n.qZA()),2&o){const t=a.$implicit,e=n.oxw(2);n.xp6(1),n.Q6J("ngStyle",n.VKq(4,S,"6px solid "+t.color)),n.xp6(1),n.hij(" ",t.name," "),n.xp6(1),n.Q6J("ngStyle",n.VKq(6,M,"6px solid "+t.color)),n.xp6(1),n.hij(" ",e.getPlayerTotalScores(t._id)," ")}}function O(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"ion-card"),n.TgZ(1,"ion-card-header"),n.TgZ(2,"ion-card-title",10),n._uU(3,"Uno"),n.qZA(),n.qZA(),n.TgZ(4,"ion-card-content"),n.TgZ(5,"ion-list"),n.YNc(6,N,5,8,"ion-item",11),n.qZA(),n.TgZ(7,"ion-row",12),n.TgZ(8,"ion-button",13),n.NdJ("click",function(){return n.CHM(t),n.oxw().onFinishGameHandler()}),n.ALo(9,"async"),n.ALo(10,"async"),n._uU(11),n.ALo(12,"translate"),n.qZA(),n.TgZ(13,"ion-button",13),n.NdJ("click",function(){return n.CHM(t),n.oxw().onCancelGameHandler()}),n.ALo(14,"async"),n.ALo(15,"async"),n._uU(16),n.ALo(17,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&o){const t=n.oxw();n.xp6(6),n.Q6J("ngForOf",t.playersWithTotal),n.xp6(2),n.Q6J("disabled",0===n.lcZ(9,5,t.rounds$).length||n.lcZ(10,7,t.loading$)),n.xp6(3),n.hij(" ",n.lcZ(12,9,"elements.button.finishGame")," "),n.xp6(2),n.Q6J("disabled",0===n.lcZ(14,11,t.rounds$).length||n.lcZ(15,13,t.loading$)),n.xp6(3),n.hij(" ",n.lcZ(17,15,"elements.button.cancelGame")," ")}}const Q=[{path:"",component:(()=>{class o{constructor(t,e,c,g){this.store=t,this.sharedService=e,this.route=c,this.router=g,this.roundsCfg=d.N.games.uno.rounds,this.activeRound$=new T.X(this.roundsCfg[0])}ngOnInit(){this.loading$=this.store.select(x.NH),this.roundMembers$=this.store.select(U.uW),this.activeRound$.subscribe(t=>this.activeRound=t),this.rounds$=this.store.select(u.PK),this.rounds$.subscribe(t=>{this.rounds=t,t.length?"start"===this.activeRound._id&&this.activeRound$.next(this.roundsCfg[1]):"start"!==this.activeRound._id&&this.activeRound$.next(this.roundsCfg[0])}),this.players$=this.store.select(p.y1),this.players$.pipe((0,m.w)(t=>(this.players=t,this.roundMembers$))).subscribe(t=>{this.roundMembers=t,this.playersWithTotal=this.players.map(e=>Object.assign(Object.assign({},e),{totalScore:this.getPlayerTotalScores(e._id)})).sort((e,c)=>c.totalScore-e.totalScore)})}getPlayerTotalScores(t){return this.sharedService.getPlayerTotalScores(t)}onMenuClickHandler(t){this.activeRound$.next(t.target.value)}onFinishGameHandler(){}onCancelGameHandler(){this.store.dispatch(A.GJ())}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(f.yh),n.Y36(Z.F),n.Y36(l.gz),n.Y36(l.F0))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-uno"]],decls:15,vars:6,consts:[["slot","end"],["menu","games-menu"],["scrollable","",3,"value","ionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"ion-no-margin","ion-no-padding"],["size-lg","6","size-md","8","size-sm","10","offset-lg","3","offset-md","2","offset-sm","1"],[4,"ngIf"],[3,"activeRound$"],[3,"value","disabled"],[3,"name"],[1,"ion-text-center"],[4,"ngFor","ngForOf"],[1,"ion-justify-content-around"],["fill","outline","size","small",3,"disabled","click"],[3,"ngStyle"],["slot","end",3,"ngStyle"]],template:function(t,e){1&t&&(n.TgZ(0,"ion-header"),n.TgZ(1,"ion-toolbar"),n.TgZ(2,"ion-buttons",0),n._UZ(3,"ion-menu-button",1),n.qZA(),n.TgZ(4,"ion-segment",2),n.NdJ("ionChange",function(g){return e.onMenuClickHandler(g)}),n.YNc(5,F,4,7,"ion-segment-button",3),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"ion-content"),n.TgZ(7,"ion-grid",4),n.TgZ(8,"ion-row"),n.TgZ(9,"ion-col",5),n.YNc(10,O,18,17,"ion-card",6),n.ALo(11,"async"),n.qZA(),n.qZA(),n.TgZ(12,"ion-row"),n.TgZ(13,"ion-col",5),n._UZ(14,"app-uno-rounds",7),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(4),n.Q6J("value",e.activeRound),n.xp6(1),n.Q6J("ngForOf",e.roundsCfg),n.xp6(5),n.Q6J("ngIf",0!==n.lcZ(11,4,e.rounds$).length),n.xp6(4),n.Q6J("activeRound$",e.activeRound$))},directives:[s.Gu,s.sr,s.Sm,s.fG,s.cJ,s.QI,r.sg,s.W2,s.jY,s.Nd,s.wI,r.O5,J,s.GO,s.gu,s.PM,s.Zi,s.Dq,s.FN,s.q_,s.YG,s.Ie,s.Q$,r.PC],pipes:[r.Ov,v.X$],styles:[""]}),o})()}];let Y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[l.Bz.forChild(Q)],l.Bz]}),o})();var j=i(6932);let G=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[r.ez,y.u5,s.Pc,Y,v.aw.forChild({extend:!0}),j.j]]}),o})()}}]);